{% extends "payments/base.html" %}
{% block title %}Plans — Mujeb{% endblock %}

{% block content %}
<div class="grid grid-cols-1 md:grid-cols-3 gap-6">
  {% for plan in plans %}
  <div class="bg-white border rounded-lg shadow-sm p-6 flex flex-col">
    <div class="flex items-center justify-between">
      <div>
        <h2 class="text-xl font-semibold">{{ plan.name }}</h2>
        <p class="text-sm text-gray-500 mt-1">
          {% if plan.is_yearly %} 
            سنوي
          {% else %}
            شهري
          {% endif %}
        </p>
      </div>
      <div class="text-right">
        <div class="text-2xl font-bold">
          {% if plan.price != null %}
            {{ plan.price }}
          {% else %}
            __
          {% endif %}
        
        </div>
        <div class="text-sm text-gray-500">IQD</div>
      </div>
    </div>

    <div class="mt-4 flex-1">
      <ul class="text-sm space-y-2 text-gray-600">
        {% if plan.name|lower != "enterprise" %}
          <li>✔︎ عدد الزبائن {{ plan.bot_users }}</li>
          <li>✔︎ عدد الموظفين {{ plan.members }}</li>
          <li>✔︎ التثبيت والدعم افني</li>
        {% else %}
          تواصل معنا لعمل باقة مخصصة لحجم شركتك
        {% endif %}
      </ul>
    </div>

    <div class="mt-6">
      {% if plan.id|lower != "free" and plan.id not in current_workspace.plan %}
        <a href="{% url 'payments:subscribe' plan.id %}?workspace_id={{ workspace_id }}&owner_email={{ owner_email }}"
          class="block text-center w-full inline-block bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-4 rounded">
          اشترك الآن
        </a>
      {% else %}
        <a href="#"
           class="block text-center w-full inline-block bg-gray-400 text-white font-semibold py-2 px-4 rounded opacity-50 cursor-not-allowed pointer-events-none">
          اشترك الآن
        </a>
      {% endif %}
    </div>
  </div>
  {% empty %}
  <div class="col-span-full text-center text-gray-500">
    لا يوجد لدينا خطط حالياً
  </div>
  {% endfor %}
</div>
{% endblock %}
