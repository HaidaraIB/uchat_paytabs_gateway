{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>{% block title %}Mujeb — Payments{% endblock %}</title>

    <!-- Tailwind CDN (quick prototype) -->
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
      /* small custom tweaks */
      .container {
        max-width: 1000px;
        margin-left: auto;
        margin-right: auto;
        padding: 1.25rem;
      }
    </style>
  </head>
  <body class="bg-gray-50 text-gray-800">
    <header class="bg-white shadow-sm">
      <div class="container flex items-center justify-between py-4">
      <!-- Left side: logo + title -->
      <div class="flex items-center gap-3">
        <!-- Logo -->
        <div class="w-10 h-10 flex items-center justify-center">
          <!-- Replace M with logo -->
          <img src="{% static 'logo.png' %}" alt="Logo" class="w-10 h-10">
        </div>

        <div>
          <h1 class="text-lg font-semibold">Mujeb</h1>
          <p class="text-sm text-gray-500">الاشتراك & الدفع</p>
        </div>
      </div>
    
      {% if owner_email and workspace_id %}
        <form action="{% url 'payments:cancel_subscription' %}" method="post" onsubmit="return confirmCancel();">
          {% csrf_token %}
          <input type="hidden" name="ownerEmail" value="{{ owner_email }}">
          <input type="hidden" name="workspaceID" value="{{ workspace_id }}">
          <button
            type="submit"
            class="px-4 py-2 bg-red-500 text-white rounded-lg shadow hover:bg-red-600 transition"
          >
            إلغاء الاشتراك
          </button>
        </form>
      {% endif %}
    
        
        <script>
          function confirmCancel() {
            return confirm("هل أنت متأكد أنك تريد إلغاء الاشتراك والرجوع إلى الخطة المجانية؟");
          }
        </script>
        
        
      </div>
    </header>
    

    <main class="container mt-8">{% block content %}{% endblock %}</main>

    <footer class="mt-12 py-8 text-center text-sm text-gray-500">
      © {{ now.year }} Mujeb — Payment Integration
    </footer>
  </body>
</html>

{% if messages %}
<div id="toast-container" class="fixed top-4 right-4 space-y-2 z-50">
  {% for message in messages %}
    <div
      class="px-4 py-2 rounded-lg shadow-lg text-white
        {% if message.tags == 'success' %} bg-green-500
        {% elif message.tags == 'error' %} bg-red-500
        {% else %} bg-gray-800 {% endif %}"
    >
      {{ message }}
    </div>
  {% endfor %}
</div>

<script>
  // Auto-hide after 3 seconds
  setTimeout(() => {
    const container = document.getElementById("toast-container");
    if (container) container.remove();
  }, 3000);
</script>
{% endif %}